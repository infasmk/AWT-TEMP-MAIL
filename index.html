<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- PRIMARY SEO -->
    <title>AWT Temp Mail - Free Disposable Email & Fake Mail Generator</title>
    <meta name="description" content="Get a free temporary email address instantly. Protect your privacy with our anonymous disposable email generator. No login required. Secure 10 minute mail service.">
    <meta name="keywords" content="temp mail, disposable email, fake email generator, 10 minute mail, anonymous email, throwaway email, spam protection, burner mail">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Team AWT">
    
    <!-- CANONICAL URL (Update this to your real domain) -->
    <link rel="canonical" href="https://tempmail.awtmods.in/" />

    <!-- OPEN GRAPH / FACEBOOK / WHATSAPP -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tempmail.awtmods.in/">
    <meta property="og:title" content="AWT Temp Mail - Free Instant Disposable Email">
    <meta property="og:description" content="Stop spam. Get a secure temporary email address instantly. No registration required.">
    <meta property="og:image" content="https://tempmail.awtmods.in/assets/og-image.jpg">

    <!-- TWITTER -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tempmail.awtmods.in/">
    <meta property="twitter:title" content="AWT Temp Mail - Free Instant Disposable Email">
    <meta property="twitter:description" content="Stop spam. Get a secure temporary email address instantly. No registration required.">
    <meta property="twitter:image" content="https://tempmail.awtmods.in/assets/og-image.jpg">

    <!-- STRUCTURED DATA (SCHEMA.ORG) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "AWT Temp Mail",
      "url": "https://your-domain.com",
      "description": "Free disposable email generator to protect users from spam and phishing.",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": "Instant email generation, Auto-refresh inbox, Secure deletion, Mobile friendly"
    }
    </script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            500: '#6366f1',
                            600: '#4f46e5',
                            900: '#312e81',
                        }
                    },
                    animation: {
                        'slide-up': 'slideUp 0.3s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out',
                        'spin-slow': 'spin 3s linear infinite',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                    },
                    keyframes: {
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
        .dark ::-webkit-scrollbar-thumb { background-color: #475569; }

        /* Splash Animation */
        #splash-progress { transition: width 1.5s ease-in-out; }

        /* Iframe Isolation */
        iframe { width: 100%; height: 100%; border: none; display: block; }

        /* Smooth Transitions */
        body, .bg-card, .text-color, footer { transition: background-color 0.3s, color 0.3s; }
        
        /* Message View Desktop Transition */
        .msg-closed { transform: translateX(100%); }
        @media (min-width: 1024px) {
            .msg-closed { transform: translateX(0); opacity: 0; pointer-events: none; }
            .msg-open { opacity: 1; pointer-events: auto; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 min-h-screen flex flex-col overflow-x-hidden selection:bg-brand-500 selection:text-white">


    <div id="splash-screen" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-brand-50 dark:bg-gray-950 transition-opacity duration-500">
        <div class="text-center animate-fade-in px-4">
            <span class="material-symbols-outlined text-7xl text-brand-600 mb-6 drop-shadow-lg">mail_lock</span>
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-3 bg-gradient-to-r from-brand-600 to-indigo-500 bg-clip-text text-transparent">AWT GHOST MAIL</h1>
            <p class="text-base md:text-lg text-gray-600 dark:text-gray-400">No Login, No Signup, Just Privacy.</p>
        </div>
        <div class="w-64 h-2 bg-gray-200 dark:bg-gray-800 rounded-full mt-10 overflow-hidden shadow-inner">
            <div id="splash-progress" class="h-full bg-gradient-to-r from-brand-500 to-indigo-600 w-0"></div>
        </div>
    </div>


    <header class="sticky top-0 z-40 w-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-b border-gray-200 dark:border-gray-800 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
               
                <div class="flex items-center gap-3">
                    <div class="bg-brand-600 text-white p-1.5 rounded-lg">
                        <span class="material-symbols-outlined text-xl block">mail</span>
                    </div>
                    <a href="/" class="font-bold text-xl md:text-2xl tracking-tight hidden sm:block hover:text-brand-600 transition-colors">AWT MAIL BOX</a>
                    <a href="/" class="font-bold text-xl tracking-tight sm:hidden hover:text-brand-600 transition-colors">AWT MAIL BOX</a>
                </div>

                <div class="flex items-center gap-3">
                    <div class="hidden md:flex items-center gap-4 text-sm font-medium text-gray-500 dark:text-gray-400 mr-4">
                        <span class="flex items-center gap-1"><span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> System Online</span>
                    </div>
                    <button id="theme-toggle" class="p-2.5 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all border border-transparent dark:border-gray-700" aria-label="Toggle Dark Mode">
                        <span class="material-symbols-outlined text-xl">light_mode</span>
                    </button>
                </div>
            </div>
        </div>
    </header>


    <main class="flex-grow max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 pb-0 lg:py-10">
        
        <!-- TOOL INTERFACE -->
        <div class="lg:grid lg:grid-cols-12 lg:gap-8 h-full">
            
            <!-- SIDEBAR -->
            <div class="lg:col-span-4 xl:col-span-3 space-y-6 mb-6 lg:mb-0">
                
                <!-- Email Card -->
                <div class="bg-gradient-to-br from-brand-600 to-indigo-800 rounded-2xl p-6 text-white shadow-xl shadow-brand-900/20 relative overflow-hidden group transition-transform hover:scale-[1.02] duration-300">
              
                    <div class="absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl -mr-10 -mt-10 pointer-events-none"></div>
                    <div class="absolute bottom-0 left-0 w-32 h-32 bg-indigo-500/20 rounded-full blur-2xl -ml-10 -mb-10 pointer-events-none"></div>
                    
                    <div class="relative z-10">
                        <div class="flex justify-between items-start mb-4">
                            <h2 class="text-indigo-100 text-xs font-bold uppercase tracking-widest border border-white/20 px-2 py-0.5 rounded">Temporary ID</h2>
                            <span class="material-symbols-outlined text-white/50">fingerprint</span>
                        </div>
                        
                        <div class="mb-6">
                            <p id="email-address" class="text-lg md:text-xl font-bold break-all leading-tight font-mono select-all">Generating...</p>
                        </div>

                        <button onclick="copyEmail()" aria-label="Copy Email Address" class="w-full bg-white/20 hover:bg-white/30 backdrop-blur-md border border-white/30 py-2.5 rounded-xl flex items-center justify-center gap-2 font-semibold text-sm transition-all active:scale-95 shadow-lg">
                            <span class="material-symbols-outlined text-lg">content_copy</span>
                            Copy Address
                        </button>
                    </div>
                </div>

                <!-- Timer -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 shadow-sm flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-orange-500 relative">
                            <svg class="w-full h-full absolute inset-0 rotate-[-90deg]" viewBox="0 0 36 36">
                                <path class="text-gray-200 dark:text-gray-700" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path id="timer-circle" class="text-orange-500 transition-all duration-1000 ease-linear" stroke-dasharray="100, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span class="material-symbols-outlined text-xl">timer</span>
                        </div>
                        <div>
                            <p class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Valid For</p>
                            <p id="timer-display" class="font-bold text-2xl tabular-nums leading-none">10:00</p>
                        </div>
                    </div>
                    <button onclick="extendTimer()" aria-label="Extend Timer" class="text-brand-600 dark:text-brand-400 hover:text-brand-700 dark:hover:text-brand-300 text-sm font-bold bg-brand-50 dark:bg-brand-900/30 px-3 py-1.5 rounded-lg transition-colors">
                        +10 Min
                    </button>
                </div>

                <!-- Controls -->
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="generateNewIdentity()" class="flex flex-col items-center justify-center gap-2 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-750 border border-gray-200 dark:border-gray-700 py-4 rounded-2xl font-medium text-sm transition-all active:scale-95 shadow-sm hover:shadow-md group">
                        <span class="material-symbols-outlined text-2xl text-brand-600 group-hover:rotate-180 transition-transform duration-500">sync_alt</span>
                        Change
                    </button>
                    <button onclick="deleteCurrentIdentity()" class="flex flex-col items-center justify-center gap-2 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/10 border border-gray-200 dark:border-gray-700 py-4 rounded-2xl font-medium text-sm transition-all active:scale-95 shadow-sm hover:shadow-md group text-red-600 dark:text-red-400">
                        <span class="material-symbols-outlined text-2xl group-hover:shake">delete</span>
                        Delete
                    </button>
                </div>
            </div>


            <!-- MAIN INBOX AREA -->
            <div class="lg:col-span-8 xl:col-span-9 flex flex-col h-full min-h-[85vh] lg:min-h-0">
                
                <div class="bg-white dark:bg-gray-800 rounded-t-2xl lg:rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col flex-1 h-full overflow-hidden relative">
                    
                    <!-- Inbox Toolbar -->
                    <div class="p-4 md:p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/50">
                        <div class="flex items-center gap-3">
                            <h2 class="font-bold text-xl md:text-2xl">Inbox</h2>
                            <span id="msg-count" class="bg-brand-100 dark:bg-brand-900 text-brand-700 dark:text-brand-300 text-xs font-bold px-2 py-0.5 rounded-full">0</span>
                        </div>
                        <button onclick="refreshInbox()" id="refresh-btn" class="flex items-center gap-2 text-sm font-medium text-brand-600 dark:text-brand-400 bg-white dark:bg-gray-700 px-4 py-2 rounded-lg hover:shadow-md transition-all border border-gray-100 dark:border-gray-600">
                            <span class="material-symbols-outlined text-lg">refresh</span>
                            <span class="hidden sm:inline">Refresh</span>
                        </button>
                    </div>

                    <!-- Inbox List -->
                    <div id="inbox-list" class="flex-1 overflow-y-auto p-4 md:p-6 space-y-3 relative">
                        <!-- Empty State -->
                        <div id="empty-state" class="absolute inset-0 flex flex-col items-center justify-center text-center p-6 animate-fade-in">
                            <div class="w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4">
                                <span class="material-symbols-outlined text-4xl text-gray-400">inbox</span>
                            </div>
                            <h3 class="text-lg font-bold mb-1">Your inbox is empty</h3>
                            <p class="text-gray-500 dark:text-gray-400 text-sm max-w-xs">Waiting for incoming emails. Hit refresh or check back in a few seconds.</p>
                        </div>
                    </div>

                    <!-- MESSAGE VIEWER (Overlay on Mobile / Modal on Desktop) -->
                    <div id="view-message" class="absolute inset-0 z-20 bg-white dark:bg-gray-900 transition-all duration-300 transform translate-x-full lg:translate-x-0 lg:opacity-0 lg:pointer-events-none lg:bg-white/50 lg:dark:bg-black/50 lg:backdrop-blur-sm lg:fixed lg:z-50 lg:flex lg:items-center lg:justify-center">
                        
                        <!-- Desktop Modal Container -->
                        <div class="w-full h-full lg:h-[85vh] lg:w-[900px] lg:max-w-[90vw] lg:bg-white lg:dark:bg-gray-900 lg:rounded-2xl lg:shadow-2xl lg:border lg:border-gray-200 lg:dark:border-gray-700 flex flex-col relative overflow-hidden lg:scale-95 lg:transition-transform" id="msg-modal-inner">
                            
                            <!-- Header -->
                            <div class="p-4 md:p-6 border-b border-gray-100 dark:border-gray-700 flex items-center gap-4 bg-white/95 dark:bg-gray-900/95 backdrop-blur">
                                <button onclick="closeMessage()" class="p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                                    <span class="material-symbols-outlined">arrow_back</span>
                                </button>
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-bold text-lg md:text-xl truncate">Read Message</h3>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="closeMessage()" class="hidden lg:flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 text-gray-500">
                                        <span class="material-symbols-outlined text-lg">close</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Content -->
                            <div class="flex-1 overflow-y-auto p-5 md:p-8 bg-gray-50/50 dark:bg-black/20">
                                <div class="max-w-3xl mx-auto">
                                    <h4 id="msg-subject" class="text-xl md:text-2xl font-bold mb-6 leading-tight text-gray-900 dark:text-gray-100">Subject</h4>
                                    
                                    <div class="flex items-center gap-4 mb-8 bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm">
                                        <div id="msg-avatar" class="w-12 h-12 rounded-full bg-gradient-to-tr from-brand-500 to-pink-500 flex items-center justify-center text-white font-bold text-xl shadow-md">
                                            A
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p id="msg-from" class="font-bold text-sm md:text-base text-gray-900 dark:text-gray-100 truncate">Sender Name</p>
                                            <p id="msg-email" class="text-xs text-gray-500 truncate">sender@example.com</p>
                                        </div>
                                        <p id="msg-date" class="text-xs text-gray-500 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">Date</p>
                                    </div>

                                    <!-- Safe HTML Render Area -->
                                    <div class="w-full bg-white rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-sm min-h-[400px]">
                                        <iframe id="msg-iframe" class="w-full h-[500px]" sandbox="allow-same-origin"></iframe>
                                    </div>
                                </div>
                            </div>

                            <!-- Footer Actions -->
                            <div class="p-4 md:p-6 border-t border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-900 flex justify-end gap-3">
                                <button onclick="closeMessage()" class="px-6 py-2 rounded-xl text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">Close</button>
                                <button onclick="closeMessage()" class="px-6 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl font-medium text-sm flex items-center gap-2 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors">
                                    <span class="material-symbols-outlined text-lg">delete</span>
                                    Delete (Local)
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- SEO CONTENT SECTION (Crucial for Ranking) -->
        <article class="prose dark:prose-invert max-w-none mt-16 mb-12 bg-white dark:bg-gray-900 p-8 rounded-3xl border border-gray-200 dark:border-gray-800">
            <h2 class="text-3xl font-bold mb-6 text-brand-600 dark:text-brand-400">Why Use AWT Temp Mail?</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-3">Protect Your Privacy</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">
                        A <strong>disposable email address</strong> keeps your real identity safe. When you sign up for unknown websites, apps, or forums, use our fake email generator to avoid giving out your personal information.
                    </p>
                    <h3 class="text-xl font-bold mb-3">Stop Spam Instantly</h3>
                    <p class="text-gray-600 dark:text-gray-400">
                        Primary inboxes often get flooded with newsletters and promotional junk. By using <strong>AWT 10 minute mail</strong>, you ensure that spam never reaches your actual email account. Once you are done, the temporary email is deleted automatically.
                    </p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-3">How does Temp Mail work?</h3>
                    <ul class="list-disc list-inside text-gray-600 dark:text-gray-400 space-y-2">
                        <li><strong>No Registration:</strong> Just visit the site and get an email instantly.</li>
                        <li><strong>Instant Reception:</strong> Emails arrive in seconds.</li>
                        <li><strong>Secure Deletion:</strong> Your data is wiped after the session ends.</li>
                        <li><strong>Anonymous:</strong> We do not track your IP or personal data.</li>
                    </ul>
                </div>
            </div>
        </article>

    </main>

    <!-- FOOTER -->
    
    <footer class="border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 mt-auto z-10 relative">
        <div class="max-w-7xl mx-auto px-4 py-8 md:py-12">
            <div class="flex flex-col items-center justify-center space-y-6">
                
                <!-- Social Icons -->
                <div class="flex space-x-8">
                    <!-- Telegram -->
                    <a href="https://t.me/ARTWEBTECHWA" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-[#229ED9] transition-colors transform hover:scale-110" aria-label="Join us on Telegram">
                        <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 11.944 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
                    </a>
                    <!-- YouTube -->
                    <a href="https://www.youtube.com/@ARTWEBTECH" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-[#FF0000] transition-colors transform hover:scale-110" aria-label="Subscribe on YouTube">
                        <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                    </a>           
                </div>

                <!-- Text -->
                <div class="text-center">
                    <p class="font-bold text-gray-900 dark:text-gray-100 tracking-wider text-sm md:text-base">
                       TEAM AWT <span class="text-brand-600 mx-2">||</span> Secure Temporary Mail Service
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">&copy;  created by infas.mk  </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- TOAST NOTIFICATION CONTAINER -->
    <div id="toast-container" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 flex flex-col items-center gap-2 z-[60] w-full px-4 pointer-events-none"></div>

    <!-- JAVASCRIPT LOGIC -->
    <script type="module">
        // --- 1. CONFIGURATION & STATE ---
        const API_BASE = "https://api.mail.tm";
        const REFRESH_INTERVAL = 10000;
        const TIMER_DURATION = 600;
        const ORIGINAL_TITLE = document.title; // For SEO title swapping

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playDing() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(800, audioCtx.currentTime); // High pitch
            oscillator.frequency.exponentialRampToValueAtTime(400, audioCtx.currentTime + 0.1);
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.1);
        }

        function playDishum() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = 'sawtooth'; // Rougher sound
            oscillator.frequency.setValueAtTime(150, audioCtx.currentTime); 
            oscillator.frequency.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3); // Drop pitch fast
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.3);
        }

        let state = {
            email: null,
            password: null,
            token: null,
            accountId: null,
            messages: [],
            timerValue: TIMER_DURATION,
            timerIntervalId: null,
            pollingIntervalId: null,
            isDark: false
        };

        // --- 2. DOM ELEMENTS ---
        const els = {
            splash: document.getElementById('splash-screen'),
            splashProgress: document.getElementById('splash-progress'),
            themeToggle: document.getElementById('theme-toggle'),
            themeIcon: document.querySelector('#theme-toggle span'),
            emailDisplay: document.getElementById('email-address'),
            timerDisplay: document.getElementById('timer-display'),
            timerCircle: document.getElementById('timer-circle'),
            inboxList: document.getElementById('inbox-list'),
            emptyState: document.getElementById('empty-state'),
            msgCount: document.getElementById('msg-count'),
            viewMessage: document.getElementById('view-message'),
            msgModalInner: document.getElementById('msg-modal-inner'),
            msgSubject: document.getElementById('msg-subject'),
            msgFrom: document.getElementById('msg-from'),
            msgEmail: document.getElementById('msg-email'),
            msgDate: document.getElementById('msg-date'),
            msgAvatar: document.getElementById('msg-avatar'),
            msgIframe: document.getElementById('msg-iframe'),
            toastContainer: document.getElementById('toast-container')
        };

        // --- 3. INIT & THEME ---
        async function initApp() {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                els.themeIcon.innerText = 'dark_mode';
                state.isDark = true;
            } else {
                els.themeIcon.innerText = 'light_mode';
            }

            setTimeout(() => { els.splashProgress.style.width = '100%'; }, 100);
            await generateNewIdentity(); 
            setTimeout(() => {
                els.splash.style.opacity = '0';
                els.splash.style.pointerEvents = 'none';
            }, 1600);
            
            document.body.addEventListener('click', () => {
                if (audioCtx.state === 'suspended') audioCtx.resume();
            }, { once: true });
        }

        els.themeToggle.addEventListener('click', () => {
            if (state.isDark) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
                els.themeIcon.innerText = 'light_mode';
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
                els.themeIcon.innerText = 'dark_mode';
            }
            state.isDark = !state.isDark;
        });

        // --- 4. API FUNCTIONS ---
        async function apiCall(endpoint, method = 'GET', body = null, auth = false) {
            const headers = { 'Content-Type': 'application/json' };
            if (auth && state.token) headers['Authorization'] = `Bearer ${state.token}`;
            const config = { method, headers };
            if (body) config.body = JSON.stringify(body);

            try {
                const res = await fetch(`${API_BASE}${endpoint}`, config);
                if (!res.ok) {
                    if (res.status === 401) {
                        showToast('Session expired. Regenerating...', 'error');
                        generateNewIdentity();
                        return null;
                    }
                    throw new Error(`API Error: ${res.status}`);
                }
                if (res.status === 204) return true;
                return await res.json();
            } catch (err) {
                console.error(err);
                showToast('Network error - check connection', 'error');
                return null;
            }
        }

        window.generateNewIdentity = async function() {
            playDishum();
            stopPolling();
            els.emailDisplay.innerText = "Generating...";
            document.title = ORIGINAL_TITLE; // Reset title on new ID
            
            const domains = await apiCall('/domains');
            if (!domains || !domains['hydra:member'].length) {
                showToast('Service unavailable', 'error');
                return;
            }
            const domain = domains['hydra:member'][0].domain;
            const username = 'awt-' + Math.random().toString(36).substring(7);
            const password = Math.random().toString(36).substring(2) + 'A1!';
            const email = `${username}@${domain}`;

            const acc = await apiCall('/accounts', 'POST', { address: email, password: password });
            
            if (acc) {
                state.email = email;
                state.password = password;
                state.accountId = acc.id;
                
                const tokenData = await apiCall('/token', 'POST', { address: email, password: password });
                if (tokenData) {
                    state.token = tokenData.token;
                    els.emailDisplay.innerText = state.email;
                    showToast('New ID Created', 'success');
                    state.messages = [];
                    renderInbox();
                    resetTimer();
                    startPolling();
                }
            }
        }

        window.deleteCurrentIdentity = function() {
            if(confirm("Destroy this temporary email? All messages will be lost.")) {
                generateNewIdentity();
            }
        }

        // --- 5. INBOX LOGIC ---
        function startPolling() {
            if (state.pollingIntervalId) clearInterval(state.pollingIntervalId);
            refreshInbox();
            state.pollingIntervalId = setInterval(refreshInbox, REFRESH_INTERVAL);
        }

        function stopPolling() {
            if (state.pollingIntervalId) clearInterval(state.pollingIntervalId);
        }

        window.refreshInbox = async function() {
            const btn = document.querySelector('#refresh-btn span.material-symbols-outlined');
            if(btn) btn.classList.add('animate-spin');

            if (!state.token) return;

            const data = await apiCall('/messages?page=1', 'GET', null, true);
            if (data && data['hydra:member']) {
                const newMessages = data['hydra:member'];
                if (newMessages.length > state.messages.length) {
                    playDing();
                    showToast('You have new mail!', 'success');
                    // SEO: Update Title to notify user
                    document.title = `(${newMessages.length}) New Mail - AWT Temp Mail`;
                }
                state.messages = newMessages;
                els.msgCount.innerText = state.messages.length;
                renderInbox();
            }
            
            if(btn) setTimeout(() => btn.classList.remove('animate-spin'), 1000);
        }

        function renderInbox() {
            els.inboxList.innerHTML = '';
            if (state.messages.length === 0) {
                els.inboxList.appendChild(els.emptyState);
                return;
            }

            state.messages.forEach(msg => {
                const timeAgo = formatTimeAgo(msg.createdAt);
                const initial = msg.from.name ? msg.from.name[0].toUpperCase() : (msg.from.address[0].toUpperCase());
                
                const card = document.createElement('div');
                card.className = "bg-gray-50 dark:bg-gray-900/50 hover:bg-white dark:hover:bg-gray-700 p-4 rounded-xl border border-transparent hover:border-brand-200 dark:hover:border-brand-700 transition-all cursor-pointer animate-slide-up group mb-3 shadow-sm hover:shadow-md";
                card.onclick = () => openEmail(msg.id);
                
                card.innerHTML = `
                    <div class="flex items-start gap-4">
                        <div class="w-10 h-10 rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 flex-shrink-0 flex items-center justify-center text-brand-600 dark:text-brand-400 font-bold group-hover:bg-brand-500 group-hover:text-white transition-colors">
                            ${initial}
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-start mb-1">
                                <h4 class="font-bold text-sm truncate pr-2 text-gray-900 dark:text-gray-100">${escapeHtml(msg.from.name || msg.from.address)}</h4>
                                <span class="text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full">${timeAgo}</span>
                            </div>
                            <p class="font-medium text-sm truncate mb-1 text-gray-800 dark:text-gray-200">${escapeHtml(msg.subject)}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 truncate">${escapeHtml(msg.intro || 'No preview available')}</p>
                        </div>
                    </div>
                `;
                els.inboxList.appendChild(card);
            });
        }

        window.openEmail = async function(id) {
            showToast('Fetching message...', 'info');
            const msg = await apiCall(`/messages/${id}`, 'GET', null, true);
            
            if (msg) {
                els.msgSubject.innerText = msg.subject || "(No Subject)";
                els.msgFrom.innerText = msg.from.name || "Unknown";
                els.msgEmail.innerText = msg.from.address;
                els.msgDate.innerText = new Date(msg.createdAt).toLocaleString();
                els.msgAvatar.innerText = (msg.from.name || msg.from.address)[0].toUpperCase();

                const htmlContent = msg.html ? msg.html[0] : (msg.text || "No content");
                // Inject safer styles for iframe content
                const iframeContent = `
                    <style>
                        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding: 20px; color: #1f2937; line-height: 1.6; }
                        a { color: #4f46e5; text-decoration: underline; }
                        img { max-width: 100%; height: auto; border-radius: 8px; }
                        blockquote { border-left: 4px solid #e5e7eb; padding-left: 16px; margin-left: 0; color: #6b7280; }
                    </style>
                    ${htmlContent}
                `;
                els.msgIframe.srcdoc = iframeContent;

                els.viewMessage.classList.remove('translate-x-full', 'lg:opacity-0', 'lg:pointer-events-none');
                els.viewMessage.classList.add('lg:opacity-100');
                if(els.msgModalInner) els.msgModalInner.classList.remove('lg:scale-95');
                
                // SEO: Update title to reading mode
                document.title = `${msg.subject} - AWT Temp Mail`;
            }
        }

        window.closeMessage = function() {
            els.viewMessage.classList.add('translate-x-full', 'lg:opacity-0', 'lg:pointer-events-none');
            els.viewMessage.classList.remove('lg:opacity-100');
            if(els.msgModalInner) els.msgModalInner.classList.add('lg:scale-95');
            setTimeout(() => { els.msgIframe.srcdoc = ''; }, 300);
            
            // SEO: Reset title
            document.title = state.messages.length > 0 ? `(${state.messages.length}) AWT Temp Mail` : ORIGINAL_TITLE;
        }

        // --- 6. TIMER LOGIC ---
        function resetTimer() {
            state.timerValue = TIMER_DURATION;
            updateTimerDisplay();
            if (state.timerIntervalId) clearInterval(state.timerIntervalId);
            state.timerIntervalId = setInterval(tickTimer, 1000);
        }

        function tickTimer() {
            if (state.timerValue > 0) {
                state.timerValue--;
                updateTimerDisplay();
            } else {
                clearInterval(state.timerIntervalId);
                showToast('Email expired. Please refresh.', 'error');
            }
        }

        function updateTimerDisplay() {
            const m = Math.floor(state.timerValue / 60).toString().padStart(2, '0');
            const s = (state.timerValue % 60).toString().padStart(2, '0');
            els.timerDisplay.innerText = `${m}:${s}`;
            
            // Update Circle Stroke
            const percentage = (state.timerValue / TIMER_DURATION) * 100;
            els.timerCircle.setAttribute('stroke-dasharray', `${percentage}, 100`);
            
            if(state.timerValue < 60) els.timerCircle.classList.replace('text-orange-500', 'text-red-500');
            else els.timerCircle.classList.replace('text-red-500', 'text-orange-500');
        }

        window.extendTimer = function() {
            state.timerValue = TIMER_DURATION;
            updateTimerDisplay();
            showToast('+10 Minutes added', 'success');
            if (state.timerIntervalId) clearInterval(state.timerIntervalId);
            state.timerIntervalId = setInterval(tickTimer, 1000);
        }

        // --- 7. UTILITIES ---
        window.copyEmail = function() {
            if (!state.email) return;
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(state.email)
                    .then(() => showToast('Copied to clipboard!', 'success'))
                    .catch(() => fallbackCopy(state.email));
            } else {
                fallbackCopy(state.email);
            }
        }

        function fallbackCopy(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed"; 
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                document.execCommand('copy');
                showToast('Copied to clipboard!', 'success');
            } catch (err) {
                showToast('Copy failed', 'error');
            }
            document.body.removeChild(textArea);
        }

        window.showToast = function(msg, type = 'info') {
            const toast = document.createElement('div');
            let bgClass = 'bg-gray-800';
            let icon = 'info';
            if (type === 'success') { bgClass = 'bg-emerald-600'; icon = 'check_circle'; }
            if (type === 'error') { bgClass = 'bg-red-600'; icon = 'error'; }

            toast.className = `${bgClass} text-white px-6 py-3 rounded-xl shadow-2xl text-sm font-medium animate-slide-up flex items-center gap-3 pointer-events-auto min-w-[300px] justify-between`;
            toast.innerHTML = `<div class="flex items-center gap-2"><span class="material-symbols-outlined text-lg">${icon}</span> ${msg}</div>`;

            els.toastContainer.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(10px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function escapeHtml(text) {
            if (!text) return '';
            return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
        }

        function formatTimeAgo(dateString) {
            const seconds = Math.floor((new Date() - new Date(dateString)) / 1000);
            if (seconds < 60) return "Just now";
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}h ago`;
            return `${Math.floor(hours / 24)}d ago`;
        }

        initApp();
    </script>
</body>
</html>
